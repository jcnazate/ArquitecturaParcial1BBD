<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/css/account.css" />
    <title>Cuenta</title>
</head>

<body class="login-body">
    <div class="account-header">
        <h1 class="account-title">Gestión de Operaciones</h1>
    </div>
    <button class="floating-back-button" onclick="window.location.href='welcome.html'" title="Regresar">&#8592;</button>
    <div class="login-container">
        <div class="login-card">
            <div class="form-group">
                <label for="transactionType">Tipo de operación</label>
                <select id="transactionType">
                    <option value="DEP">Depósito</option>
                    <option value="RET">Retiro</option>
                    <option value="TRA">Transferencia</option>
                </select>
            </div>
            <div id="deposit-withdraw-fields">
                <div class="form-group">
                    <input type="text" id="cuenta" placeholder="Cuenta" />
                </div>
                <div class="form-group">
                    <input type="text" id="monto" placeholder="Monto" />
                </div>
            </div>
            <div id="transfer-fields" class="hidden">
                <div class="form-group">
                    <input type="text" id="cuentaOrigen" placeholder="Cuenta origen" />
                </div>
                <div class="form-group">
                    <input type="text" id="cuentaDestino" placeholder="Cuenta destino" />
                </div>
                <div class="form-group">
                    <input type="text" id="montoTransfer" placeholder="Monto" />
                </div>
            </div>
            <button id="actionButton" class="btn-primary">Aceptar</button>
        </div>
    </div>
    <div id="modal-container"></div>
    <script>
        // Fetch modal
        fetch("/modal.html")
            .then((response) => response.text())
            .then((html) => {
                document.getElementById("modal-container").innerHTML = html;
                const modalOkButton = document.getElementById("modal-ok-button");
                if (modalOkButton) {
                    modalOkButton.addEventListener("click", () => {
                        document.getElementById("modal-container").classList.remove("active");
                    });
                }
            });

        // Mostrar modal al dar clic en "Aceptar"
        document.getElementById("actionButton").addEventListener("click", function(e) {
            e.preventDefault();
            document.getElementById("modal-container").classList.add("active");
        });

        // Handle transaction type changes
        const transactionType = document.getElementById("transactionType");
        const depositWithdrawFields = document.getElementById("deposit-withdraw-fields");
        const transferFields = document.getElementById("transfer-fields");

        transactionType.addEventListener("change", () => {
            const selectedType = transactionType.value;
            if (selectedType === "TRA") {
                transferFields.classList.remove("hidden");
                depositWithdrawFields.classList.add("hidden");
            } else {
                transferFields.classList.add("hidden");
                depositWithdrawFields.classList.remove("hidden");
            }
        });
    </script>
    <script type="module" src="/controller/modal.js"></script>
    <script type="module" src="/controller/account.js"></script>
</body>

</html>